{% extends 'base1.html' %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>test</title>
</head>
<body>

    <h1 style="background-color: antiquewhite;color:black;">请输入待查姓名，网页数量及信息展示效果</h1>
    <form action="/index/" method="post" enctype="multipart/form-data">
        自动爬取：<input type="file" name="crawlfile">
        网页数量（默认120）: <input type ="text" value="120" name="pagenum2"/>
        <input type="submit">
    </form>
    <hr style="height:1px;border:none;border-top:1px solid #555555;" />
    <form action="/index/" method="post">
        人物姓名: <input type ="text" name="name"/>
        网页数量（默认120）: <input type ="text" value="120" name="pagenum"/>
        网页最少词数（默认200, 只限聚合功能）: <input type ="text" value="200" name="numofword"/>
        功能：<select name="type">
            <option value="cluster">聚合人物信息</option>
            <option value="crawl">爬取人物网页</option>
        </select>


        <input type="submit" value="提交" />
    </form>
    <hr />
    <table width="100%" border="0" cellpadding="2" cellspacing="1" style="table-layout:fixed;">
    <tr>

        <td style="width:150px" valign="top";>
            <h3>历史查询</h3>
            <form action="/index/" method="post">
                <input name="delete" type="submit" value="删除" />
            </form>
            <hr style="height:1px;border:none;border-top:1px solid #555555;" />
            {% for line in namels %}
                <li><a href="{% url 'sample:index' %}?name={{ line }}">{{ line }}</a></li>
            {% endfor %}
        </td>
    <td valign="top">
    <h1 style="background-color: antiquewhite;color:black;">结果展示</h1>
    <table border="1">
           <thead>
               <th>聚合结果</th>
               <th>网页地址</th>
               <th>高频关键词及数量</th>
               <th>高频命名实体及数量</th>
           </thead>
           <tbody>
           　　{% for line in data %}
                   <tr>
                       <td>{{ line.no }}</td>
                       <td>
                           {%  for lin in line.netaddress %}
                                <li>{{ lin | urlize }}</li>
                           {% endfor %}
                       </td>
                       <td>{% for lin in line.words %}
                           <li>{{ lin.0 }}, {{ lin.1 }}</li>
                           {% endfor %}
                       </td>
                       <td>
                           <select id="ner-select-{{ line.no }}"  onchange='choose("{{ line.no }}");'>
                                <option value="1">隐藏</option>
                                <option value="2">显示</option>
                           </select>
                           <script>
                            function choose(h){

                                if(document.getElementById("ner-select-" + h).value=='1')
                                {
                                    document.getElementById('ner-' + h).style.display='none';
                                }
                                else if(document.getElementById("ner-select-" + h).value=='2')
                                {
                                    document.getElementById('ner-' + h).style.display='block';
                                }
                            };
                            </script>

                            <div id="ner-{{ line.no }}" style="display:none">
                                {% for key,value in line.ner.items %}
                                    <li>{{ key }}:
                                        {% for lin in value %}
                                            <p>{{ lin.0 }}, {{ lin.1 }}</p>
                                        {% endfor %}</li>
                                {% endfor %}
                            </div>
                       </td>
                   </tr>
               {% endfor %}


           </tbody>
    </table>
    <table border="1">
           <thead>
               <th>未使用网页（网页相关信息较少）</th>
           </thead>
           <tbody>
           　　{% for line in unuse %}
                   <tr>
                       <td> {{ line | urlize }}</td>
                   </tr>
               {% endfor %}
           </tbody>
    </table>
    </td>
    </tr>
    </table>


    <script src="vue.js"></script>

</body>

</html>